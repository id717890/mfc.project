<div class="container-fluid" style="height:calc(100% - 171px)">
	<div class="row">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<h2 class="page-header">Список дел</h2>
			<div [ngBusy]="{busy: busy, message:busyMessage}" style="position: relative">
				<div class="row" style="margin-bottom:-30px;" [class.margin-for-empty-list]="totalRows===0">
					<div class="col-lg-10 col-md-10 col-sm-12 col-xs-12 no-m">
						<div class="panel panel-default">
							<div class="panel-body">
								<div class="row">
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<div class="form-group">
											<label>От</label>
											<my-date-picker [options]="myDatePickerOptions" (dateChanged)="onChangedDateBegin($event)" [selDate]="dateBegin"></my-date-picker>
										</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<div class="form-group">
											<label>До</label>
											<my-date-picker [options]="myDatePickerOptions" (dateChanged)="onChangedDateEnd($event)" [selDate]="dateEnd"></my-date-picker>
										</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<div class="form-group">
											<label>Статус</label>
											<select name="fileStatus" class="form-control" [(ngModel)]="selectedFileStatus">
                    						<option [value]="-1">Все</option>
                    						<option *ngFor="let fileStatus of fileStatuses" [value]="fileStatus.id">{{fileStatus.caption}}</option>
                						</select>
										</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<div class="form-group">
											<label>ОГВ</label>
											<select name="organization" class="form-control" [(ngModel)]="selectedOrganization">
                    						<option [value]="-1">Все</option>
                    						<option *ngFor="let organization of organizations" [value]="organization.id">{{organization.caption}}</option>
                						</select>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<div class="form-group">
											<label>Эксперт</label>
											<select name="expert" class="form-control" [(ngModel)]="selectedExpert">
                    						<option [value]="-1">Все</option>
                    						<option *ngFor="let expert of experts" [value]="expert.id">{{expert.description}}</option>
                						</select>
										</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<div class="form-group">
											<label>Контролёр</label>
											<select name="controller" class="form-control" [(ngModel)]="selectedController">
                    						<option [value]="-1">Все</option>
                    						<option *ngFor="let controller of controllers" [value]="controller.id">{{controller.description}}</option>
                						</select>
										</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<div class="form-group">
											<label>Услуга</label>
											<ng2-completer [dataService]="autoCompleteServices" [minSearchLength]="0" (selected)="onSelectService($event)" placeholder="Выберите услугу"
												textSearching="Поиск..." textNoResults="Ничего не найдено!" name="service"></ng2-completer>
											<input type="hidden" name="test">
										</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"></div>
								</div>
								<div class="row">
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<button class="btn btn-default" style="width:100%; margin-bottom: 5px;" (click)="Search()" title="Обновить"><span class="glyphicon glyphicon-refresh">&nbsp;</span>&nbsp;</button>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<button class="btn btn-success" style="width:100%; margin-bottom: 5px;" (click)="AcceptFiles()" title="Принять"><span class="glyphicon glyphicon-saved">&nbsp;</span>Принять на контроль</button>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
										<button class="btn btn-default" style="width:100%; margin-bottom: 5px;" (click)="CreatePackage()" title="Создать пакет"><span class="glyphicon glyphicon-list">&nbsp;</span>Создать пакет</button>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"></div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="row" *ngIf="totalRows!=0">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<span style="display:block; width:100%; padding-right:20px; text-align:right">Всего: {{totalRows}}</span>
						<pagination-controls (pageChange)="getPage($event)" id="paginate"></pagination-controls>
					</div>
				</div>
				<div class="panel panel-default" style="margin-top:0">
					<table class="table table-striped table-hover table-responsive table-condensed">
						<colgroup>
							<col>
							<col class="col-width-20">
							<col class="col-width-50">
							<col>
							<col>
							<col>
							<col>
							<col>
							<col class="col-width-50">
						</colgroup>
						<thead>
							<tr>
								<th><input type="checkbox" (change)="onSelectAllFiles($event)" [(ngModel)]="checkAll"></th>
								<th>Дата</th>
								<th>Описание</th>
								<th>Услуга</th>
								<th>ОГВ</th>
								<th>Эксперт</th>
								<th>Контролёр</th>
								<th>Статус</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let model of models | paginate: { id: 'paginate', itemsPerPage: pageSize, currentPage: pageIndex, totalItems: totalRows }">
								<td><input type="checkbox" [(ngModel)]="model.is_selected"></td>
								<td title="{{model.date | date: 'dd.MM.yyyy HH:mm'}}">{{model.date | date: 'dd.MM.yy'}}</td>
								<td>{{model.caption}}</td>
								<td>{{model.action?.service?.caption}}</td>
								<td>{{model.organization?.caption}}</td>
								<td>{{model.expert?.description}}</td>
								<td>{{model.controller?.description}}</td>
								<td>{{model.status?.caption}}</td>
								<td>
									<a (click)="edit(model)" class="glyphicon glyphicon-edit" title="Редактировать"></a>
									<a (click)="delete(model)" class="glyphicon glyphicon-remove" title="Удалить запись"></a>
								</td>
							</tr>
							<tr *ngIf="totalRows==0">
								<td colspan="9" style="text-align:center; padding: 15px">За указанный период данные отсутствуют</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="row" *ngIf="totalRows!=0">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<span style="display:block; width:100%; padding-right:20px; text-align:right">Всего: {{totalRows}}</span>
						<pagination-controls (pageChange)="getPage($event)" id="paginate"></pagination-controls>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>